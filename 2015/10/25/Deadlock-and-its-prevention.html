<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Deadlock and its prevention - Jing Chen</title>

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Deadlock and its prevention">
    <meta name="twitter:description" content="">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Deadlock and its prevention">
    <meta property="og:description" content="">

    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="/apple-touch-icon-precomposed.png" rel="apple-touch-icon">

    <link rel="stylesheet" type="text/css" href="//milantracy.github.io/themes/uno/assets/css/uno.css?v=1.0.0" />

    <link rel="canonical" href="https://milantracy.github.io/2015/10/25/Deadlock-and-its-prevention.html" />
    
    <meta property="og:site_name" content="Jing Chen" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Deadlock and its prevention" />
    <meta property="og:description" content="Deadlock A deadlock is a situation in which two or more competing actions are each waiting for the other to finish, and thus neither ever does. A deadlockers situation can arise if all of the following conditions hold simultaneously in..." />
    <meta property="og:url" content="https://milantracy.github.io/2015/10/25/Deadlock-and-its-prevention.html" />
    <meta property="article:published_time" content="2015-10-25T07:00:00.000Z" />
    <meta property="article:modified_time" content="2015-11-15T09:11:27.990Z" />
    <meta property="article:tag" content="Deadlock" />
    <meta property="article:tag" content="Operating System" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Deadlock and its prevention" />
    <meta name="twitter:description" content="Deadlock A deadlock is a situation in which two or more competing actions are each waiting for the other to finish, and thus neither ever does. A deadlockers situation can arise if all of the following conditions hold simultaneously in..." />
    <meta name="twitter:url" content="https://milantracy.github.io/2015/10/25/Deadlock-and-its-prevention.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Jing Chen",
    "author": {
        "@type": "Person",
        "name": "Jing Chen",
        "image": "https://avatars.githubusercontent.com/u/6878258?v=3",
        "url": "undefined/author/undefined",
        "sameAs": null
    },
    "headline": "Deadlock and its prevention",
    "url": "https://milantracy.github.io/2015/10/25/Deadlock-and-its-prevention.html",
    "datePublished": "2015-10-25T07:00:00.000Z",
    "dateModified": "2015-11-15T09:11:27.990Z",
    "keywords": "Deadlock,  Operating System",
    "description": "Deadlock A deadlock is a situation in which two or more competing actions are each waiting for the other to finish, and thus neither ever does. A deadlockers situation can arise if all of the following conditions hold simultaneously in..."
}
    </script>

    <meta name="generator" content="Ghost ?" />
    <link rel="alternate" type="application/rss+xml" title="Jing Chen" href="https://milantracy.github.io/rss" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">

</head>
<body class="post-template tag-Deadlock tag-Operating-System no-js">

    <span class="mobile btn-mobile-menu">
        <i class="icon icon-list btn-mobile-menu__icon"></i>
        <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
    </span>

    <header class="panel-cover panel-cover--collapsed " style="background-image: url(http://s1.thcdn.com/design-assets/products/10780752/b.jpg)">
      <div class="panel-main">
    
        <div class="panel-main__inner panel-inverted">
        <div class="panel-main__content">
    
            <h1 class="panel-cover__title panel-title"><a href="https://milantracy.github.io" title="link to homepage for Jing Chen">Jing Chen</a></h1>
            <hr class="panel-cover__divider" />
            <p class="panel-cover__description">Software Developer</p>
            <hr class="panel-cover__divider panel-cover__divider--secondary" />
    
            <div class="navigation-wrapper">
    
              <nav class="cover-navigation cover-navigation--primary">
                <ul class="navigation">
                  <li class="navigation__item"><a href="https://milantracy.github.io/#blog" title="link to Jing Chen blog" class="blog-button">Blog</a></li>
                </ul>
              </nav>
    
              
              
              <nav class="cover-navigation navigation--social">
                <ul class="navigation">
              
                  <!-- Twitter -->
                  <li class="navigation__item">
                    <a href="https://www.facebook.com/profile.php?id=100006454394797" title="Facebook account">
                      <i class='icon icon-social-facebook'></i>
                      <span class="label">Facebook</span>
                    </a>
                  </li>
              
                  <!-- Twitter -->
                  <li class="navigation__item">
                    <a href="https://twitter.com/ChenCristiano?lang=en" title="Twitter account">
                      <i class='icon icon-social-twitter'></i>
                      <span class="label">Twitter</span>
                    </a>
                  </li>
              
              
                  <!-- Github -->
                  <li class="navigation__item">
                    <a href="https://github.com/milantracy" title="Github account">
                      <i class='icon icon-social-github'></i>
                      <span class="label">Github</span>
                    </a>
                  </li>
                  </li>
              
              
              
              
                  <!-- LinkedIn -->
                  <li class="navigation__item">
                    <a href="https://www.linkedin.com/pub/jing-chen/71/b60/363" title="LinkedIn account">
                      <i class='icon icon-social-linkedin'></i>
                      <span class="label">LinkedIn</span>
                    </a>
                  </li>
              
                  <!-- Email -->
                  <li class="navigation__item">
                    <a href="mailto:milantracy@gmail.com" title="Email milantracy@gmail.com">
                      <i class='icon icon-mail'></i>
                      <span class="label">Email</span>
                    </a>
                  </li>
              
                </ul>
              </nav>
              
    
            </div>
    
          </div>
    
        </div>
    
        <div class="panel-cover--overlay"></div>
      </div>
    </header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            

  <article class="post-container post-container--single">

    <header class="post-header">
      <div class="post-meta">
        <time datetime="25 Oct 2015" class="post-meta__date date">25 Oct 2015</time> &#8226; <span class="post-meta__tags tags">on <a href="https://milantracy.github.io/tag/Deadlock">Deadlock</a>, <a href="https://milantracy.github.io/tag/Operating-System"> Operating System</a></span>
        <span class="post-meta__author author"><img src="https://avatars.githubusercontent.com/u/6878258?v=3" alt="profile image for Jing Chen" class="avatar post-meta__avatar" /> by Jing Chen</span>
      </div>
      <h1 class="post-title">Deadlock and its prevention</h1>
    </header>

    <section class="post tag-Deadlock tag-Operating-System">
      <div class="sect2">
<h3 id="_deadlock">Deadlock</h3>
<div class="paragraph">
<p>A deadlock is a situation in which two or more competing actions are each waiting for the other to finish, and thus neither ever does.</p>
</div>
<div class="paragraph">
<p>A deadlockers situation can arise if <strong>all</strong> of the following conditions hold simultaneously in a system:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Mutual exclusion</strong>: at least one resource must be held in a non-shareable mode. Only one process can use the resource at any given instant of time.</p>
</li>
<li>
<p><strong>Hold and wait or resource holding</strong>: a process is currently holding at least one resource and requesting additional resources which are being held by other processes.</p>
</li>
<li>
<p><strong>No preemption</strong>: a resource can be released only voluntarily by the process holding it.</p>
</li>
<li>
<p><strong>Circular wait</strong>: a process must be waiting for a resource which is being held by another process, which in turn is waiting for the first process to release the resource. In general, there is a set of waiting processes, P = {P1, P2, â€¦, PN}, such that P1 is waiting for a resource held by P2, P2 is waiting for a resource held by P3 and so on until PN is waiting for a resource held by P1.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_prevention">Prevention</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Lock ordering</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Locks of resources should be obtained in the same order by any thread. A thread cann&#8217;t get the later lock in the sequence until it has obtained all ealier locks.</p>
</div>
<div class="paragraph">
<p>The method is efficient, however, it has to know all locks it needs ahead of taking any of the locks.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Lock time out</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Put a timeout on lock attempts meaning a thread trying to obtain a lock will only try for so long before giving up.</p>
</div>
<div class="paragraph">
<p>If a thread does not succeed in taking all necessary locks within the given timeout, it will backup, free all locks taken, wait for a random amount of time and then retry.</p>
</div>
<div class="paragraph">
<p>The random amount of time waited serves to give other threads trying to take the same locks a chance to take all locks, and thus let the application continue running without locking.</p>
</div>
<div class="paragraph">
<p>A problem with the lock timeout mechanism is that it is not possible to set a timeout for entering a synchronized block in Java.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Deadlock detection</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Deadlock detection is a heavier deadlock prevention mechanism aimed at cases in which lock ordering isn&#8217;t possible, and lock timeout isn&#8217;t feasible.</p>
</div>
<div class="paragraph">
<p>Use a directed graph to represent the relationship among locks and threads.</p>
</div>
<div class="paragraph">
<p>When a thread requests a lock but the request is denied, the thread can traverse the lock graph to check for deadlocks.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>locks and threads are nodes in the graph.</p>
</li>
<li>
<p>if thread owns a lock, there is a edge from lock to thread.</p>
</li>
<li>
<p>if thread requests a lock, there is a edge from thread to lock.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After travelling the graph, if there exists a <strong>cycle</strong>, there is a deadlock.</p>
</div>
<div class="paragraph">
<p>Solution:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Release all locks, backup, wait a random amount of time and then retry.</p>
</li>
<li>
<p>A better option is to determine or assign a priority of the threads so that only one (or a few) thread backs up. The rest of the threads continue taking the locks they need as if no deadlock had occurred. If the priority assigned to the threads is fixed, the same threads will always be given higher priority. To avoid this you may assign the priority randomly whenever a deadlock is detected.</p>
</li>
</ol>
</div>
</div>
</div>
    </section>

  </article>




            <footer class="footer">
                <span class="footer__copyright">&copy; 2015. All rights reserved.</span>
                <span class="footer__copyright"><a href="http://uno.daleanthony.com" title="link to page for Uno Ghost theme">Uno theme</a> by <a href="http://daleanthony.com" title="link to website for Dale-Anthony">Dale-Anthony</a></span>
                <span class="footer__copyright">Proudly published with <a href="http://hubpress.io" title="link to Hubpress website">Hubpress</a></span>
            </footer>
        </div>
    </div>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();      
      </script>

    <script type="text/javascript" src="//milantracy.github.io/themes/uno/assets/js/main.js?v=1.0.0"></script>
    
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-67853404-1', 'auto');
    ga('send', 'pageview');

    </script>

</body>
</html>
